<html>
<head>
<title>生辰八字查询</title>
</head>
<body>
<SCRIPT language=JavaScript>
<!--
tg=new Array("甲","乙","丙","丁","戊","己","庚","辛","壬","癸");dz=new Array("子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥");sx=new Array("鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪");w=new Array("木","火","土","金","水");f=new Array("东","南","中","西","北");sz=new Array("一","二","三","四","五","六","七","八","九","十",
"十一","十二","十三","十四","十五","十六","十七","十八","十九","二十",
"廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十");m0=new Array(
0,1,0,0,1,0,1,0,1,1,1,0,1,0,1,0,0,1,0,1,0,1,1,1,
0,1,0,1,2,1,0,0,1,1,0,1,1,1,0,1,0,0,1,0,0,1,1,0,
1,1,0,1,1,0,0,1,0,1,0,1,0,1,1,3,0,1,0,1,0,1,0,1,
0,1,0,1,0,1,1,0,1,0,1,0,1,0,0,1,1,0,1,0,1,1,0,1,
0,4,0,1,0,1,0,1,1,1,0,1,0,1,0,0,1,0,1,0,1,1,1,0,3632)
m1=new Array(
1,0,1,0,0,4,0,1,1,0,1,1,1,0,1,0,0,1,0,0,1,1,0,1,
1,1,0,1,0,0,1,0,0,1,0,1,1,1,0,1,3,0,1,0,0,1,0,1,
1,0,1,1,0,1,0,1,0,1,0,0,1,1,0,1,0,1,1,0,1,0,1,0,
1,2,1,0,1,1,0,1,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,
0,1,0,0,1,0,3,1,0,1,1,1,0,1,0,0,1,0,0,1,0,1,1,1,7294)
m2=new Array(
1,0,1,0,0,1,0,0,1,0,1,1,1,0,1,1,2,1,0,0,1,0,1,1,
0,1,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,0,0,
1,0,1,3,1,0,1,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,
1,0,0,1,0,1,0,1,0,1,1,1,0,4,0,1,0,0,1,0,1,1,1,1,
0,1,0,0,1,0,0,1,0,1,1,1,0,1,1,0,0,4,0,1,0,1,1,0,10955);m3=new Array(
1,1,0,1,0,1,0,0,1,0,1,0,1,1,1,0,1,0,1,0,0,1,0,1,
0,1,1,0,5,0,1,0,1,0,0,1,0,1,0,1,1,0,1,0,1,1,0,1,
0,0,1,0,1,0,1,1,0,1,1,0,1,0,3,0,0,1,1,0,1,1,1,0,
1,0,0,1,0,0,1,0,1,1,1,0,1,1,0,0,1,0,3,0,1,1,0,1,
1,1,0,0,1,0,0,1,0,1,0,1,1,1,0,1,0,1,0,0,1,0,1,0,14587);m4=new Array(
1,1,0,1,1,3,0,0,1,0,1,0,1,0,1,1,0,1,0,1,0,1,0,1,
0,1,0,1,0,1,1,0,1,0,1,0,1,0,1,3,0,1,0,1,1,0,1,1,
0,0,1,0,0,1,0,1,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,
1,4,0,1,0,0,1,0,1,0,1,1,1,0,1,0,1,0,0,1,0,1,0,1,
1,0,1,1,0,1,2,1,0,1,0,1,0,1,1,0,1,1,0,0,1,0,1,0,18249);m5=new Array(
1,0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,3,0,1,1,0,1,0,1,
0,1,0,0,1,1,0,1,1,0,1,0,1,0,1,0,0,1,0,1,1,0,1,1,
0,1,3,0,0,1,0,1,0,1,1,1,0,1,0,1,0,0,1,0,1,0,1,1,
1,0,1,0,1,0,0,4,1,0,1,0,1,1,1,0,1,0,0,1,0,1,0,1,
0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,4,1,0,1,0,1,0,21911);m6=new Array(
1,0,1,0,1,0,1,1,0,1,0,1,0,1,0,0,1,0,1,1,0,1,1,0,
1,0,1,2,1,0,1,0,1,1,1,0,1,0,1,0,0,1,0,1,0,1,1,1,
0,1,0,1,0,0,1,0,0,1,1,0,1,1,4,1,0,0,1,0,0,1,1,0,
1,1,0,1,1,0,0,1,0,1,0,1,0,1,0,1,1,0,4,1,0,1,0,1,
0,1,0,1,0,1,1,0,1,0,1,0,1,0,0,1,0,1,1,0,1,1,0,1,25544);m7=new Array(
0,1,0,0,4,1,0,1,1,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,
1,0,1,0,0,1,0,0,1,1,0,1,1,1,0,4,0,1,0,0,1,1,0,1,
1,1,0,1,0,0,1,0,0,1,0,1,1,1,0,1,0,1,0,4,0,1,0,1,
1,0,1,1,0,1,0,1,0,1,0,0,1,0,1,1,0,1,1,0,1,0,1,0,
1,0,0,1,0,5,0,1,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,29206);m8=new Array(
0,1,0,0,1,0,0,1,1,0,1,1,1,0,1,2,1,0,0,1,0,1,1,1,
1,0,1,0,0,1,0,0,1,0,1,1,1,0,1,1,0,0,1,0,0,4,1,1,
0,1,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,0,0,
1,0,1,0,1,4,1,1,0,1,0,0,1,0,1,0,1,0,1,1,0,1,1,0,
1,0,0,1,0,1,0,1,0,1,1,1,0,1,0,0,4,0,1,0,1,1,1,1,32868);m9=new Array(
0,1,0,0,1,0,0,1,0,1,1,1,0,1,1,0,0,1,0,0,1,0,1,1,
0,1,4,1,0,1,0,0,1,0,1,0,1,1,1,0,1,0,1,0,0,1,0,1,
0,1,1,0,1,0,1,4,0,1,0,1,0,1,0,1,1,0,1,0,1,1,0,0,
1,0,1,0,1,0,1,1,0,1,1,0,1,0,0,1,2,1,1,0,1,1,0,1,
1,0,0,1,0,0,1,0,1,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,36499);m10=new Array(
1,1,0,4,1,0,0,1,0,1,0,1,1,1,0,1,0,1,0,0,1,0,1,0,
1,1,0,1,1,0,1,0,0,1,0,1,0,4,1,1,0,1,0,1,0,1,0,1,
0,1,0,1,0,1,1,0,1,0,1,0,1,0,1,0,1,0,4,1,1,0,1,1,
0,0,1,0,0,1,0,1,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,
1,1,0,0,4,0,1,0,1,0,1,1,1,0,1,0,1,0,0,1,0,1,0,1,40161);m11=new Array(
1,0,1,1,0,1,0,0,1,0,1,0,1,0,1,4,1,0,1,0,1,0,1,0,
1,0,1,0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,4,1,0,1,
0,1,0,0,1,0,1,1,1,0,1,0,1,0,1,0,0,1,0,1,1,0,1,1,
0,1,0,1,0,3,0,1,0,1,1,1,0,1,0,1,0,0,1,0,1,0,1,1,
1,0,1,0,1,0,0,1,0,0,1,1,0,1,1,4,1,0,0,1,0,1,0,1,43823);m12=new Array(
0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,0,1,0,1,0,1,
0,4,0,1,1,0,1,1,0,1,0,1,0,1,0,0,1,0,1,1,0,1,1,0,
1,0,1,0,0,4,1,0,1,1,1,0,1,0,1,0,0,1,0,0,1,1,1,0,
1,1,0,1,0,0,1,0,0,1,1,0,1,1,1,0,4,0,1,0,0,1,1,0,
1,1,0,1,0,1,0,1,0,0,1,1,0,1,0,1,1,0,1,0,1,0,1,0,47455)
m13=new Array(
0,1,4,1,0,1,1,0,1,0,1,0,1,0,0,1,0,1,1,0,1,1,0,1,
0,1,0,0,1,0,1,0,1,1,4,1,0,1,0,0,1,0,1,0,1,1,0,1,
1,0,1,0,0,1,0,0,1,1,0,1,1,1,0,1,0,3,0,0,1,0,1,1,
1,1,0,1,0,0,1,0,0,1,0,1,1,1,0,1,0,1,0,1,0,1,0,0,
1,1,0,1,4,1,0,1,0,1,0,0,1,0,1,1,0,1,0,1,1,0,1,0,51117)
m14=new Array(
0,1,0,1,0,1,1,0,1,1,0,1,0,4,0,1,0,1,0,1,1,0,1,1,
0,1,0,0,1,0,0,1,1,0,1,1,1,0,1,0,0,1,2,1,0,1,1,1,
1,0,1,0,0,1,0,0,1,0,1,1,1,0,1,0,1,0,1,0,0,1,0,1,
1,0,1,1,3,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,0,1,0,
1,0,1,0,1,1,0,1,1,0,1,0,0,1,3,0,1,0,1,1,0,1,1,0,54779)
ms=new Array(m0,m1,m2,m3,m4,m5,m6,m7,m8,m9,m10,m11,m12,m13,m14);ly=new Array(29,30,58,59,59,60);tw=new Array(0,0,1,1,2,2,3,3,4,4);dw=new Array(4,2,0,0,2,1,1,2,3,3,2,4);
function inq(form){re="请重新输入！";y=form.y.value;if(y==""||y<1901||y>2050)
alert("年应在1901和2050之间。"+re);else{gl0=(Date.UTC(y,0,1)-Date.UTC(1901,1,19))/86400000;dy=y-1901;i=Math.floor(dy/10);nl0=(i==0)?0:ms[i-1][120];n=i*120;for(j=0;j<120;j++){n++;if(n>dy*12)break;nl0+=ly[ms[i][j]];}cjr=(nl0-gl0)%31+1;cjy=(nl0-gl0>30)?2:1;jq=tg[(dy+6)%10]+dz[dy%12];jh=tg[(dy+7)%10]+dz[(dy+1)%12];s1="<title>查询结果</title><body bgcolor=#FFFFFF text=#ff0000><center>"+"<table width=400><tr><td><font size=4>您查询的结果如下:<p>公历："+y+"年";s2="<br>春节："+cjy+"月"+cjr+"日<br>节前："+jq+"年<br>节后："+jh+"年<br>";s3="要查询生辰八字，请输入时。";s4="</font></td></tr></table></center></body>";m=form.m.value;d=form.d.value;h=form.h.value;if(m==""||d==""){document.write(s1,s2,"<br>","进一步查询，请输入月和日。<br>",s3,s4);document.close();}else if(m>12||m<1)
alert("月应在1与12之间。"+re);else if(d>31||d<1)
alert("日应在1与31之间。"+re);else if((m==4||m==6||m==9||m==11)&&d>30)
alert(m+"月只有30天。"+re);else if(y%4!=0&&m==2&&d>28)
alert(y+"年是平年，2月只有28天。"+re);else if(m==2&&d>29)
alert(y+"年是闰年，2月只有29天。"+re);else if(h>23||h<0)
alert("时应在0与23之间。"+re);else{if(form.h.value=="")h=0;sum=(Date.UTC(y,m-1,d,h)-Date.UTC(1901,1,18,23))/1000;sumd=Math.floor(sum/86400);day=(Math.floor((sum-1800)/86400)+51)%7;xq=(day==0)?"日":sz[day-1];tgr=(sumd+54)%10;dzr=(sumd+52)%12;gzr=tg[tgr]+dz[dzr];dzs=Math.floor((h*1+1)/2)%12;tgs=((tgr%5)*2+dzs)%10;gzs=tg[tgs]+dz[dzs];for(i=0;ms[i][120]<=sumd;i++);k=(i==0)?0:ms[i-1][120];p=i*120;for(j=0;j<120;j++){k+=ly[ms[i][j]];p++;if(k>sumd)break;}if(sumd+30<0){ri=59+sumd;p=-1;}else if(sumd<0){ri=30+sumd;p=0;}else
ri=sumd+ly[ms[i][j]]-k;yue=((p+11)%12==0)?"正":sz[(p+11)%12];mij=ms[i][j];if((mij==2||mij==3)&&ri>28){ri-=29;yue="闰"+yue;}else if((mij==4||mij==5)&&ri>29){ri-=30;yue="闰"+yue;}ri=((ri<10)?"初":"")+sz[ri];tgn=Math.floor((p-1)/12+7)%10;dzn=Math.floor((p-1)/12+1)%12;gzn=tg[tgn]+dz[dzn];tgy=(p+5)%10;dzy=(p+1)%12;gzy=tg[tgy]+dz[dzy];tn=tw[tgn];dn=dw[dzn];ty=tw[tgy];dy=dw[dzy];tr=tw[tgr];dr=dw[dzr];ts=tw[tgs];ds=dw[dzs];s5=m+"月"+d+"日（星期"+xq+"）";s6="<br>农历："+gzn+"年"+yue+"月"+ri+"日";s7="生肖："+sx[dzn]+"<p>"
if(form.h.value=="")
document.write(s1,s5,s6,s2,"干支：",gzn,"年",gzy,"月",gzr,"日<br>",s7,s3,s4);else
document.write(s1,s5,h,"点",s6,dz[dzs],"时",s2,
"八字：",gzn,"　",gzy,"　",gzr,"　",gzs,"<br>",
"五行：",w[tn],w[dn],"　",w[ty],w[dy],"　",w[tr],w[dr],"　",w[ts],w[ds],"<br>",
"方位：",f[tn],f[dn],"　",f[ty],f[dy],"　",f[tr],f[dr],"　",f[ts],f[ds],"<br>",s7,s4);document.close();}}}
function setfocus(){document.cal.y.focus();return;}
//-->
</SCRIPT>
<STYLE type=text/css>.style1 {
	FONT-SIZE: 12pt; COLOR: #ff0000
}
.style2 {
	FONT-SIZE: 10pt; COLOR: #0000ff
}
</STYLE>
<DIV align=center><SPAN class=style1><STRONG><font size="5">生辰八字查询</font></STRONG></SPAN><BR><BR></DIV>
<TABLE cellSpacing=1 cellPadding=0 width=540 align=center bgColor=#999999 border=0>
<TBODY>
<TR>
<TD width="42%" bgColor=#ffffff height=400 valign="top">
　<p align="center"><b><font color="#0000FF">查询说明：</font></b><br>
</p>
<P><font size="2">　<FONT color=#000000>　年份限于1901—2050年之间。 <BR><BR>　　如果只输入年份，则输出结果为该年春节日期及春节前后的年干支；输入年、月、日，则输出结果还有该日星期
，对应农历的年月日、干支、生肖；输入年、月、日、时，则输出结果还有生辰八字及八字所对应的五行、方位。 <BR><BR>　　年、月、日采用公历准确输入，而时的输入只要在同一个时辰范围里则不影响查询结果。23点至1点前是子时，1点至3点前是丑时，……，21点至23点前是亥时
，具体关系见右边的对照表。 <BR></FONT></font><FONT color=#ffffff><font size="2"><BR></font>
<font size="2" color="#000000">　　计算时辰以23点为一天的开端，这样干支系统才能自洽，因此本查询生辰八字
程序按此规则设计。除了计算时辰外，还是应把0点作为一天的开端，也就是说，23点以后出生的人，生日算当日，时辰算下一日子时，八字按下一日算。 </font></FONT></P></TD>
<TD vAlign=top width="4%" bgColor=#ffffff height=400>　</TD>
<TD vAlign=top width="48%" bgColor=#ffffff height=400>
<FORM name=cal>　<p>&nbsp; <INPUT maxLength=4 size=5 name=y><FONT color=#000000> 请输入年<font size="2">（1901—2050）</font></FONT> 
	</p>
<P><FONT color=#000000>&nbsp; <INPUT maxLength=2 size=3 name=m>　 请输入月<font size="2">（1—12）</font></FONT> 
<P><FONT color=#000000>&nbsp; <INPUT maxLength=2 size=3 name=d>　 请输入日<font size="2">（1—31）</font></FONT> 
<P><FONT color=#000000>&nbsp; <INPUT maxLength=2 size=3 name=h>　 请输入时<font size="2">（0—23）</font></FONT> 
<P>&nbsp; &nbsp; &nbsp; <INPUT onclick=inq(cal) type=button value=查询 name=button> &nbsp; &nbsp; &nbsp; <INPUT type=reset value=清除 name=reset> </P></FORM>
	<hr>
	<P align="center"><b><FONT color=#0000FF>十二时辰与24小时对照表</FONT></b>
<P align="center"><font size="2" color="#000000">子时：23时— 1时</font><font size="2">
<br><a align="center">丑时： 1时— 3时</a>
<br><a align="center">寅时： 3时— 5时</a>
<br><a align="center">卯时： 5时— 7时</a>
<br><a align="center">辰时： 7时— 9时</a>
<br><a align="center">巳时： 9时—11时</a>
<br><a align="center">午时：11时—13时</a>
<br><a align="center">未时：13时—15时</a>
<br><a align="center">申时：15时—17时</a>
<br><a align="center">酉时：17时—19时</a>
<br><a align="center">戌时：19时—21时</a>
<br><a align="center">亥时：21时—23时</a> </font>
<P align="center"><FONT color=#000000>&nbsp;<b><font size="2">＊本软件不支持低版本浏览器！</font></b></FONT>
<P></P></TD></TR></TBODY></TABLE>
</body>
</html>